---
import ProjectCard from '../ProjectCard/ProjectCard.astro'
import { urlFor } from '../../lib/sanity'
import type { Project } from '../../lib/sanity'

interface Props {
  projects: Project[]
}

const { projects } = Astro.props

// Transform Sanity projects to match ProjectCard interface
const transformedProjects = projects.map(project => ({
  projectImage: {
    src: project.heroImage ? urlFor(project.heroImage).width(800).height(600).url() : '/images/jpg/background.webp',
    alt: project.title + ' project showcase',
    width: 800,
    height: 600,
  },
  title: project.client || project.tags?.[0] || 'Project',
  heading: project.title,
  description: project.subtitle || 'View project details',
  projectUrl: `/projects/${project.slug.current}`,
}))
---
<section class='grid grid-cols-1 md:grid-cols-6 lg:grid-cols-12 gap-8 max-w-[100vw] mt-16'>
  <h2 class="col-span-1 md:col-span-6 lg:col-span-12 text-base text-zinc-800 font-medium">Featured</h2>
  {transformedProjects.map((project) => <ProjectCard {...project} />)}
</section>
