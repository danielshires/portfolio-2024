---
import MetaDetail from './MetaDetail.astro';

interface Props {
  client?: string
  role?: string[]
  team?: string[]
  year?: number
  duration?: string
}

const { client, role, team, year, duration } = Astro.props

// Helper function to format array as string
function formatArray(arr?: string[]): string {
  if (!arr || arr.length === 0) return ''
  if (arr.length === 1) return arr[0]
  if (arr.length === 2) return arr.join(' & ')
  return arr.slice(0, -1).join(', ') + ' & ' + arr[arr.length - 1]
}
---

<dl class="flex flex-row flex-wrap gap-6 text-sm">
  <!-- Client -->
  {client && (
    <MetaDetail label="Client">
      {client}
    </MetaDetail>
  )}

  <!-- Role -->
  {role && role.length > 0 && (
    <MetaDetail label={`Role${role.length > 1 ? 's' : ''}`}>
      {formatArray(role)}
    </MetaDetail>
  )}

  <!-- Team -->
  {team && team.length > 0 && (
    <MetaDetail label="Team">
      {formatArray(team)}
    </MetaDetail>
  )}

  <!-- Year -->
  {year && (
    <MetaDetail label="Year">
      {year}
    </MetaDetail>
  )}

  <!-- Duration -->
  {duration && (
    <MetaDetail label="Duration">
      {duration}
    </MetaDetail>
  )}
</dl>

<style>
  /* Custom definition list styling for better semantic markup */
  dt {
    font-weight: 500;
  }

  dd {
    margin: 0;
  }
</style>
