---
import { urlFor } from '../../../lib/sanity'
import type { SanityImage, Project } from '../../../lib/sanity'
import Text from '../../ui/text/Text.astro'

interface Props {
  project: Project
}

const { project } = Astro.props
---

<section class='flex flex-col gap-4 mt-40' aria-label='Project Hero'>
  <div class='flex flex-col gap-2'>
    <Text variant='h1'>{project.title}</Text>
    {project.subtitle && <Text variant='body'>{project.subtitle}</Text>}
  </div>
</section>

<script>
  import gsap from 'gsap'

  // Animation Configuration
  const config = {
    duration: 0.8,
    stagger: 0.1,
    ease: 'power2.out',
  }

  // Initialize animation
  function initAnimation() {
    const heroSection = document.querySelector('section[aria-label="Project Hero"]')
    const textElements = heroSection?.querySelectorAll('h1, p')

    if (!heroSection || !textElements) return

    // Set initial states
    gsap.set(textElements, {
      opacity: 0,
      y: 20,
    })

    // Animate text elements
    gsap.to(textElements, {
      opacity: 1,
      y: 0,
      duration: config.duration,
      stagger: config.stagger,
      ease: config.ease,
    })
  }

  // Run animation on load
  window.addEventListener('load', () => {
    requestAnimationFrame(initAnimation)
  })
</script>
