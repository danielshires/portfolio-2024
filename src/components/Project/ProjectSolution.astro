---
import { PortableText } from 'astro-portabletext'

interface Props {
  solution: any // Portable Text content
}

const { solution } = Astro.props

// Custom components for Portable Text rendering
const components = {
  block: {
    normal: ({ children }: any) => `<p class="text-lg leading-relaxed text-zinc-700 dark:text-zinc-300 mb-4">${children}</p>`,
    h4: ({ children }: any) => `<h4 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-3">${children}</h4>`,
  },
  marks: {
    strong: ({ children }: any) => `<strong class="font-semibold text-zinc-900 dark:text-zinc-100">${children}</strong>`,
    em: ({ children }: any) => `<em class="italic">${children}</em>`,
  },
  list: {
    bullet: ({ children }: any) => `<ul class="space-y-3 mb-6">${children}</ul>`,
    number: ({ children }: any) => `<ol class="space-y-3 mb-6 list-decimal list-inside">${children}</ol>`,
  },
  listItem: {
    bullet: ({ children }: any) => `
      <li class="flex items-start gap-3">
        <div class="flex-shrink-0 w-5 h-5 rounded-full bg-green-500 flex items-center justify-center mt-1">
          <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
        </div>
        <span class="text-lg leading-relaxed text-zinc-700 dark:text-zinc-300">${children}</span>
      </li>
    `,
    number: ({ children }: any) => `<li class="text-lg leading-relaxed text-zinc-700 dark:text-zinc-300">${children}</li>`,
  },
}
---

<section class="space-y-6">
  <h2 class="text-2xl md:text-3xl font-bold text-zinc-900 dark:text-zinc-100">
    Solution
  </h2>
  
  <div class="prose prose-lg max-w-none">
    <div class="bg-green-50 dark:bg-green-900/10 border-l-4 border-green-500 p-6 rounded-r-lg">
      <div class="space-y-4">
        <PortableText value={solution} components={components} />
      </div>
    </div>
  </div>
</section>

<style>
  /* Custom prose styling to override defaults */
  .prose p {
    @apply text-lg leading-relaxed text-zinc-700 dark:text-zinc-300;
  }
  
  .prose h4 {
    @apply text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-3 mt-6;
  }
  
  .prose strong {
    @apply font-semibold text-zinc-900 dark:text-zinc-100;
  }
  
  .prose em {
    @apply italic;
  }
  
  .prose ul {
    @apply list-none pl-0;
  }
  
  .prose ol {
    @apply pl-0;
  }
  
  .prose li {
    @apply pl-0;
  }
  
  /* Solution section specific styling */
  .prose p:last-child {
    @apply mb-0;
  }
  
  .prose ul:last-child,
  .prose ol:last-child {
    @apply mb-0;
  }
</style>