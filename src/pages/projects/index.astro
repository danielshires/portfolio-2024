---
import Layout from '../../layouts/Layout.astro'
import { getAllProjects, urlFor } from '../../lib/sanity'
import SEO from '../../components/Shared/SEO.astro'
import Text from '../../components/Text/Text'

const projects = await getAllProjects()
---

<Layout pageTitle='Projects' pageDescription='Explore my design and development projects'>
  <SEO
    title='Projects | Your Portfolio'
    description='Explore my latest design and development projects, featuring UI/UX design, web development, and digital experiences.'
    slot='head'
  />

  <main class='min-h-screen pt-20 pb-16'>
    <!-- Header -->
    <section class='py-16 md:py-24'>
      <div class='container mx-auto px-4 max-w-6xl'>
        <div class='text-center space-y-6'>
          <Text variant='h1' size='5xl' className='font-bold'>Projects</Text>
          <Text variant='body' size='lg' color='muted' className='max-w-3xl mx-auto'>
            A collection of my design and development work, showcasing solutions to real-world
            problems.
          </Text>
        </div>
      </div>
    </section>

    <!-- Projects Grid -->
    <section class='pb-16'>
      <div class='container mx-auto px-4 max-w-6xl'>
        {
          projects.length > 0 ? (
            <div class='grid grid-cols-1 md:grid-cols-2 gap-8'>
              {projects.map((project) => (
                <a
                  href={`/projects/${project.slug.current}`}
                  class='block group relative overflow-hidden bg-background-light/5 dark:bg-background-dark/5 backdrop-blur-sm border border-border-light/10 dark:border-border-dark/10 hover:border-border-light/20 dark:hover:border-border-dark/20 transition-all duration-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary cursor-pointer'>
                  {project.heroImage ? (
                    <div class='w-full aspect-[2/1] overflow-hidden'>
                      <img
                        src={urlFor(project.heroImage).width(1200).url()}
                        alt={project.title}
                        loading='lazy'
                        decoding='async'
                        class='object-cover w-full h-full rounded transition-transform duration-300 group-hover:scale-105'
                      />
                    </div>
                  ) : (
                    <div class='w-full aspect-[2/1] flex items-center justify-center bg-zinc-100 dark:bg-zinc-800 text-4xl'>
                      üìù
                    </div>
                  )}
                  <div class='flex flex-col justify-between pt-2'>
                    <div class=''>
                      <Text variant='overline' className='mt-4'>
                        {project.client || 'Project'}
                      </Text>
                      <Text
                        variant='h3'
                        className='mt-1 group-hover:text-primary transition-colors duration-200'>
                        {project.title}
                      </Text>
                      {project.subtitle && (
                        <Text variant='body' color='muted' className='mt-2 line-clamp-2'>
                          {project.subtitle}
                        </Text>
                      )}
                    </div>
                  </div>
                </a>
              ))}
            </div>
          ) : (
            <div class='text-center py-16'>
              <Text variant='h3' className='mb-2'>
                No projects yet
              </Text>
              <Text variant='body' color='muted'>
                Check back soon for new content.
              </Text>
            </div>
          )
        }
      </div>
    </section>
  </main>
</Layout>

<style>
  /* Animation for project cards */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  article {
    animation: fadeInUp 0.6s ease-out both;
  }

  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .container {
    @apply mx-auto px-4;
  }
</style>
