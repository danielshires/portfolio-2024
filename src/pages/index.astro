---
import Layout from '../layouts/Layout.astro'
import Hero from '../components/Hero/Hero.astro'
import FeaturedProject from '../components/FeaturedProject/FeaturedProject.astro'
import ProjectGrid from '../components/ProjectGrid/ProjectGrid.astro'
import { projectsData } from '../data/projects'

const heroContent = {
  name: 'Daniel Shires',
  jobTitle: 'Product Designer',
  heading: {
    firstLine: 'Human centred.',
    secondLine: 'Digital experiences.',
  },
  introText: {
    first:
      "Hi, I'm Dan â€” a Product Designer with 5+ years' experience designing cohesive, user-centered digital products.",
    second:
      'My work blends UX strategy, interaction design, and branding to deliver products that are thoughtful, usable, and cohesive at every touchpoint.',
  },
}

const { featuredProject, projects } = projectsData
---

<Layout
  pageTitle='Daniel Shires | Product Designer based in Sydney currently working for Commonwealth Bank'
  pageDescription='UX/UI Designer and Front-End Developer based in Sydney Australia. I use the principles of human centred design to create simple, impactful experiences in pixels and code.'>
  <Hero {...heroContent} />
  <FeaturedProject {...featuredProject} />
  <ProjectGrid projects={projects} />
</Layout>

<script>
  import gsap from 'gsap'
  import ScrollReveal from 'scrollreveal'

  const scrollDistance = 20

  function introAnimation() {
    let tl = gsap.timeline()

    var hasPlayed = sessionStorage.getItem('hasMyAnimationPlayed')
    const headingName = document.getElementById('name')
    const headingJobTitle = document.getElementById('jobTitle')
    const headingTransformational = document.getElementById('transformational')
    const headingExperiences = document.getElementById('experiences')
    const introOne = document.getElementById('introOne')
    const introTwo = document.getElementById('introTwo')

    if (!hasPlayed) {
      const animateStart = {
        y: 10,
        opacity: 0,
        duration: 1,
        ease: 'power2.out',
      }
      const delayAnimation = `-=75%`

      tl.from(headingName, animateStart)
        .from(headingJobTitle, animateStart, delayAnimation)
        .from(headingTransformational, animateStart, delayAnimation)
        .from(headingExperiences, animateStart, delayAnimation)
        .from(introOne, animateStart, delayAnimation)
        .from(introTwo, animateStart, delayAnimation)

      sessionStorage.setItem('hasMyAnimationPlayed', 'true')
    }
  }

  function revealSection() {
    const featuredWork = document.getElementById('featuredWork')
    const sectionThree = document.getElementById('sectionThree')

    const animationOptions = {
      duration: 1000,
      delay: 500,
      distance: `${scrollDistance}px`,
      easing: 'cubic-bezier(0.5, 0, 0, 1)',
      origin: 'bottom',
    }

    ScrollReveal().reveal(featuredWork, animationOptions)
    ScrollReveal().reveal(sectionThree, animationOptions)
  }

  // Use requestAnimationFrame for better performance
  window.addEventListener('load', () => {
    requestAnimationFrame(() => {
      introAnimation()
      revealSection()
    })
  })
</script>
